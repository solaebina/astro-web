---
import { getCollection } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import Container from "@components/Container.astro";
import { PLAYGROUND } from "@consts";
import FormattedDate from "@components/FormattedDate.astro";

// Get all thoughts, filter out drafts, and sort by date
const thoughts = await getCollection("thoughts")
  .then(entries => entries.filter(entry => !entry.data.draft))
  .then(entries => entries.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf()));
---

<PageLayout title={PLAYGROUND.TITLE} description={PLAYGROUND.DESCRIPTION}>
  <Container>
    <div class="space-y-10">
      <div class="animate text-xl font-semibold text-black dark:text-white">
        Playground
      </div>
      <div class="animate space-y-6">
        <p class="text-gray-600 dark:text-gray-400">
          A log of random thoughts, ideas, and experiments. Nothing polished, just raw notes and explorations.
        </p>
        
        <!-- Log Entries -->
        <div class="space-y-6">
          <h3 class="text-lg font-semibold text-black dark:text-white">Log Entries</h3>
          
          {thoughts.map((thought) => (
            <div class="border-l-4 border-gray-300 dark:border-gray-600 pl-6 py-4">
              <div class="flex items-center gap-3 mb-2">
                <time class="text-sm text-gray-500 dark:text-gray-400 font-mono">
                  <FormattedDate date={thought.data.date} />
                </time>
                {thought.data.tags && thought.data.tags.map((tag: string) => (
                  <span class="px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded">
                    {tag}
                  </span>
                ))}
              </div>
              <h4 class="font-medium text-black dark:text-white mb-2">{thought.data.title}</h4>
              <div class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none">
                <div set:html={thought.body} />
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </Container>
</PageLayout>
