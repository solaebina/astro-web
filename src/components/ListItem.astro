---
import type { CollectionEntry } from "astro:content";

function formatDateCompact(date: Date): string {
  const year = date.getFullYear();
  const month = date.toLocaleString("default", { month: "long" });
  return `${month} ${year}.`;
}

type Props = {
  entry: CollectionEntry<"blog"> | CollectionEntry<"projects">;
}

const { entry } = Astro.props;
const formattedDate = formatDateCompact(entry.data.date);
---

<a 
  href={`/${entry.collection}/${entry.slug}`} 
  class="group block py-4 px-4 -ml-4 -mr-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200"
>
  <div class="space-y-2">
    <!-- Title, leading line, and date on same line -->
    <div class="flex items-center justify-between">
      <div class="flex items-center flex-1 min-w-0">
        <h3 class="text-base font-bold text-gray-900 dark:text-white transition-colors duration-200 truncate">
          {entry.data.title}
        </h3>
        <div class="flex-1 mx-4">
          <div class="h-px bg-gray-300 dark:bg-gray-600"></div>
        </div>
      </div>
      <div class="flex-shrink-0">
        <time class="text-sm text-gray-500 dark:text-gray-400 font-mono">
          {formattedDate}
        </time>
      </div>
    </div>
    
    <!-- Description below -->
    <p 
      class="text-sm text-gray-600 dark:text-gray-400 max-w-2xl overflow-hidden" 
      style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;"
    >
      {entry.data.description}
    </p>
  </div>
</a>
